- name: Setup kubernetes repo
  copy:
    dest: /etc/yum.repos.d/kubernetes.repo
    content: |
      [kubernetes]
      name=Kubernetes
      baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-$basearch
      enabled=1
      gpgcheck=1
      gpgkey=https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg

- name: Install utilities
  dnf:
    name:
      - make
      - jq
      - wget
      - golang
      - kernel-devel
      - kubectl
      - socat
      - NetworkManager-initscripts-ifcfg-rh
    state: latest

- name: Update system
  dnf:
    name: "*"
    state: latest

- name: Use vi as editor
  lineinfile:
    dest: /home/vagrant/.bash_profile
    line: export EDITOR=vi
